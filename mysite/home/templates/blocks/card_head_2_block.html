{% load wagtailcore_tags wagtailimages_tags %}

<div class="card-head-2-container" data-card-id="{{ value.video.id|default:0 }}">
    <!-- Ambient Light эффект -->
    <div class="card-head-2-ambient-light" id="ambient-light-{{ value.video.id|default:0 }}"></div>
    
    <!-- Единое видео с размытым фоном через CSS -->
    <div class="card-head-2-video-wrapper">
        <video 
            class="card-head-2-main-video" 
            controls 
            muted 
            loop 
            playsinline 
            preload="metadata"
            data-project-name="{{ value.project_name }}"
            id="video-{{ value.video.id|default:0 }}"
        >
            <source src="{{ value.video.file.url }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        
        <!-- Скрытый canvas для анализа цветов -->
        <canvas class="card-head-2-color-canvas" id="color-canvas-{{ value.video.id|default:0 }}" style="display: none;"></canvas>
    </div>
    
    <!-- Информационная панель проекта -->
    <div class="card-head-2-info-panel">
        {% if value.year %}
            <div class="info-item">
                <span class="info-label">Year:</span>
                <span class="info-value">{{ value.year }}</span>
            </div>
        {% endif %}
        
        {% if value.industry %}
            <div class="info-item">
                <span class="info-label">Industry:</span>
                <span class="info-value">{{ value.industry }}</span>
            </div>
        {% endif %}
        
        {% if value.client_name %}
            <div class="info-item">
                <span class="info-label">Client:</span>
                {% if value.client_url %}
                    <a href="{{ value.client_url }}" class="info-value info-link" target="_blank" rel="noopener">{{ value.client_name }}</a>
                {% else %}
                    <span class="info-value">{{ value.client_name }}</span>
                {% endif %}
            </div>
        {% endif %}
    </div>
</div>

<!-- JavaScript код перенесен в основной app.js файл -->
