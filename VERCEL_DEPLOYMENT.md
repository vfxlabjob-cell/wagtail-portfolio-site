# Развертывание на Vercel

## Исправленные проблемы

1. **Read-only файловая система**: Убрана попытка создания папки `logs` в production.py
2. **Логирование**: Убран file handler из настроек логирования, оставлен только console handler
3. **Переменные окружения**: Исправлена ссылка на `RAILWAY_PUBLIC_DOMAIN` на `VERCEL_URL`
4. **Структура проекта**: Создан `.vercelignore` для исключения ненужных файлов

## Настройка переменных окружения в Vercel

В панели управления Vercel добавьте следующие переменные окружения:

### Обязательные:
- `DJANGO_SETTINGS_MODULE`: `mysite.settings.production`
- `SECRET_KEY`: сгенерируйте новый секретный ключ

### Для базы данных (если используете PostgreSQL):
- `DATABASE_URL`: строка подключения к PostgreSQL

### Для медиа файлов (если используете S3/R2):
- `AWS_ACCESS_KEY_ID`: ваш access key
- `AWS_SECRET_ACCESS_KEY`: ваш secret key
- `AWS_STORAGE_BUCKET_NAME`: имя bucket
- `AWS_S3_ENDPOINT_URL`: URL endpoint (для R2)
- `AWS_S3_CUSTOM_DOMAIN`: (опционально) кастомный домен

### Для email:
- `EMAIL_HOST`: SMTP сервер
- `EMAIL_PORT`: порт SMTP
- `EMAIL_HOST_USER`: пользователь SMTP
- `EMAIL_HOST_PASSWORD`: пароль SMTP

## Команды для развертывания

1. Убедитесь, что все изменения закоммичены в git
2. Подключите репозиторий к Vercel
3. Vercel автоматически определит настройки из `vercel.json`
4. Добавьте переменные окружения в панели управления Vercel
5. Запустите развертывание

## Структура файлов

- `vercel.json` - конфигурация Vercel
- `api/index.py` - точка входа для Vercel
- `.vercelignore` - файлы, исключаемые из развертывания
- `requirements.txt` - зависимости Python

## Проверка развертывания

После развертывания проверьте:
1. Главная страница загружается
2. Статические файлы доступны
3. Медиа файлы загружаются (если настроены)
4. Админка Wagtail доступна

## Возможные проблемы

1. **Timeout**: Vercel имеет ограничения по времени выполнения для бесплатного плана
2. **Memory limits**: Убедитесь, что приложение не превышает лимиты памяти
3. **Cold starts**: Первый запрос может быть медленным из-за холодного старта
